"use strict";
/*
  This file is part of web3x.

  web3x is free software: you can redistribute it and/or modify
  it under the terms of the GNU Lesser General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  web3x is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Lesser General Public License for more details.

  You should have received a copy of the GNU Lesser General Public License
  along with web3x.  If not, see <http://www.gnu.org/licenses/>.
*/
Object.defineProperty(exports, "__esModule", { value: true });
const abi_coder_1 = require("./abi-coder");
/**
 * Decodes an event log response and its return values.
 *
 * @param event Abi definition of event.
 * @param log The log response to decode.
 * @returns The decoded event log.
 */
function decodeEvent(event, log) {
    log.data = log.data || '';
    log.topics = log.topics || [];
    const argTopics = event.anonymous ? log.topics : log.topics.slice(1);
    const returnValues = abi_coder_1.abiCoder.decodeLog(event.inputs, log.data, argTopics);
    delete returnValues.__length__;
    const { data, topics, ...formattedLog } = log;
    return {
        ...formattedLog,
        event: event.name,
        returnValues,
        signature: event.anonymous || !log.topics[0] ? null : log.topics[0],
        raw: {
            data,
            topics,
        },
    };
}
exports.decodeEvent = decodeEvent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb2RlLWV2ZW50LWFiaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cmFjdC9kZWNvZGUtZXZlbnQtYWJpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7O0VBZUU7O0FBS0YsMkNBQXVDO0FBRXZDOzs7Ozs7R0FNRztBQUNILFNBQWdCLFdBQVcsQ0FBQyxLQUE4QixFQUFFLEdBQWdCO0lBQzFFLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7SUFDMUIsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztJQUU5QixNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxNQUFNLFlBQVksR0FBRyxvQkFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDM0UsT0FBTyxZQUFZLENBQUMsVUFBVSxDQUFDO0lBRS9CLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsWUFBWSxFQUFFLEdBQUcsR0FBRyxDQUFDO0lBRTlDLE9BQU87UUFDTCxHQUFHLFlBQVk7UUFDZixLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUk7UUFDakIsWUFBWTtRQUNaLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNuRSxHQUFHLEVBQUU7WUFDSCxJQUFJO1lBQ0osTUFBTTtTQUNQO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUFwQkQsa0NBb0JDIn0=