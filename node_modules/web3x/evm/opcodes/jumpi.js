"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _1 = require(".");
class JumpiOp {
    constructor() {
        this.code = 0x57;
        this.mnemonic = 'JUMPI';
        this.description = 'Conditionally alter the program counter';
        this.gas = 10;
        this.bytes = 1;
    }
    toString(params) {
        return `${this.mnemonic}`;
    }
    handle(context) {
        const ip = context.stack.pop();
        const condition = context.stack.pop();
        if (condition === BigInt(0)) {
            context.ip += 1;
        }
        else {
            context.ip = +ip.toString();
            if (_1.OpCodes[context.code[context.ip]].mnemonic !== 'JUMPDEST') {
                throw new Error('Invalid jump destination.');
            }
        }
    }
}
exports.Jumpi = new JumpiOp();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianVtcGkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZXZtL29wY29kZXMvanVtcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx3QkFBb0M7QUFHcEMsTUFBTSxPQUFPO0lBQWI7UUFDa0IsU0FBSSxHQUFHLElBQUksQ0FBQztRQUNaLGFBQVEsR0FBRyxPQUFPLENBQUM7UUFDbkIsZ0JBQVcsR0FBRyx5Q0FBeUMsQ0FBQztRQUN4RCxRQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ1QsVUFBSyxHQUFHLENBQUMsQ0FBQztJQWtCNUIsQ0FBQztJQWhCUSxRQUFRLENBQUMsTUFBYztRQUM1QixPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFTSxNQUFNLENBQUMsT0FBbUI7UUFDL0IsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUcsQ0FBQztRQUNoQyxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRyxDQUFDO1FBQ3ZDLElBQUksU0FBUyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUMzQixPQUFPLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUNqQjthQUFNO1lBQ0wsT0FBTyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM1QixJQUFJLFVBQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsS0FBSyxVQUFVLEVBQUU7Z0JBQzdELE1BQU0sSUFBSSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQzthQUM5QztTQUNGO0lBQ0gsQ0FBQztDQUNGO0FBRVksUUFBQSxLQUFLLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQyJ9